<!DOCTYPE html>
<html lang="pl">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>SklepNa++</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="/static/assets/favicon.ico" />
        <link href="/static/assets/home/css/main.css" rel="stylesheet" />
        <script type="text/javascript" src="/static/assets/home/js/darkmode_head.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> <!-- Include jQuery -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@5/dark.css" />
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer></script>
    </head>

    <body class="bg-white dark:bg-gray-900 transition-all duration-900 ease-in-out">
        
        <nav class="fixed top-0 z-50 w-full bg-white border-b border-gray-200 dark:bg-gray-800 dark:border-gray-700">
            <div class="px-3 py-3 lg:px-5 lg:pl-3">
              <div class="flex items-center justify-between">
                <div class="flex items-center justify-start">
                  <button data-drawer-target="logo-sidebar" data-drawer-toggle="logo-sidebar" aria-controls="logo-sidebar" type="button" class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600">
                      <span class="sr-only">Menu</span>
                      <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                         <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
                      </svg>
                   </button>
                   <a href="/admin" class="flex ml-2 md:mr-24">
                    <img src="https://flowbite.com/docs/images/logo.svg" class="h-8 mr-3 hidden" alt="FlowBite Logo" />
                    <span class="self-center text-xl font-semibold sm:text-2xl whitespace-nowrap dark:text-white">Sklep·Na·++</span>
                  </a>
                </div>
                <div class="flex items-center">
                    <div class="flex items-center ml-3">
                        <button id="theme-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 transition-all duration-900 ease-in-out mr-2">
                            <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                            <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                            <span class="sr-only">Tryb Jasny/Ciemny</span>
                        </button>
                      <div>
                        <button type="button" class="flex text-sm bg-gray-800 rounded-full focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600" aria-expanded="false" data-dropdown-toggle="dropdown-user">
                          <span class="sr-only">Menu Użytkownika</span>
                          <img class="w-8 h-8 rounded-full" src="/static/assets/home/img/avatar.png" alt="user photo">
                        </button>
                      </div>
                      <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded shadow dark:bg-gray-700 dark:divide-gray-600" id="dropdown-user">
                        <div class="px-4 py-3" role="none">
                          <p class="text-sm text-gray-900 dark:text-white" role="none">
                            {{username_logged}}
                          </p>
                          <p class="text-sm font-medium text-gray-900 truncate dark:text-gray-300" role="none">
                            {{email_logged}}
                          </p>
                        </div>
                        <ul class="py-1" role="none">
                          <li>
                            <a href="/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem">Strona Główna</a>
                          </li>
                          <li>
                            <a href="/profile/edit" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem">Edytuj Profil</a>
                          </li>
                          <li>
                            <a href="/logout" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem">Wyloguj</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
              </div>
            </div>
          </nav>
          
          <aside id="logo-sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen pt-20 transition-transform -translate-x-full bg-white border-r border-gray-200 sm:translate-x-0 dark:bg-gray-800 dark:border-gray-700" aria-label="Sidebar">
             <div class="h-full px-3 pb-4 overflow-y-auto bg-white dark:bg-gray-800">
                <ul class="space-y-2 font-medium">
                   <li>
                      <a href="/admin" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                         <svg class="w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 21">
                            <path d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"/>
                            <path d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"/>
                         </svg>
                         <span class="ml-3">Kokpit</span>
                      </a>
                   </li>
                   <li>
                      <a href="/admin/users/" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                         <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 18">
                            <path d="M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z"/>
                         </svg>
                         <span class="flex-1 ml-3 whitespace-nowrap">Użytkownicy</span>
                      </a>
                   </li>
                   <li>
                      <a href="/admin/products/" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                         <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20">
                            <path d="M17 5.923A1 1 0 0 0 16 5h-3V4a4 4 0 1 0-8 0v1H2a1 1 0 0 0-1 .923L.086 17.846A2 2 0 0 0 2.08 20h13.84a2 2 0 0 0 1.994-2.153L17 5.923ZM7 9a1 1 0 0 1-2 0V7h2v2Zm0-5a2 2 0 1 1 4 0v1H7V4Zm6 5a1 1 0 1 1-2 0V7h2v2Z"/>
                         </svg>
                         <span class="flex-1 ml-3 whitespace-nowrap">Produkty</span>
                      </a>
                   </li>
                   <li>
                      <a href="/admin/category/" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                         <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 16">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3"/>
                         </svg>
                         <span class="flex-1 ml-3 whitespace-nowrap">Kategorie</span>
                      </a>
                   </li>
                </ul>
             </div>
          </aside>
          
          <div class="p-4 sm:ml-64">
             <div class="p-4 border-2 border-gray-200 border rounded-lg dark:border-gray-700 mt-14">

               <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
                  <div class="flex items-center justify-between pb-4 bg-white dark:bg-gray-900">
                      <div>
                          <button id="dropdownActionButton" data-dropdown-toggle="dropdownAction" class="inline-flex items-center text-gray-500 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-3 py-1.5 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700" type="button">
                              <span class="sr-only">Przycisk Akcji</span>
                              Działania
                              <svg class="w-2.5 h-2.5 ml-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                              </svg>
                          </button>
                          <!-- Dropdown menu -->
                          <div id="dropdownAction" class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 dark:divide-gray-600">
                              <ul class="py-1 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdownActionButton">
                                  <li>
                                      <a href="/product/add" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Dodaj</a>
                                  </li>
                              </ul>
                          </div>
                      </div>
                      <label for="table-search" class="sr-only">Search</label>
                      <div class="relative">
                          <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                              <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                              </svg>
                          </div>
                          <input type="text" id="table-search-users" class="block p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Search for users">
                      </div>
                  </div>
                  <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                      <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                          <tr>
                              <th scope="col" class="px-6 py-3">
                                  Nazwa Produktu
                              </th>
                              <th scope="col" class="px-6 py-3">
                                  Link
                              </th>
                              <th scope="col" class="px-6 py-3">
                                  Data Utworzenia
                              </th>
                              <th scope="col" class="px-6 py-3">
                                  Data Zakończenia
                              </th>
                              <th scope="col" class="px-6 py-3">
                                  Kategoria
                              </th>
                              <th scope="col" class="px-6 py-3">
                                Sprzedawca
                              </th>
                              <th scope="col" class="px-6 py-3">
                                  Akcje
                              </th>
                          </tr>
                      </thead>
                      <tbody>
                          
                      </tbody>
                  </table>
                  <!-- Paginacja -->
                  <div id="pagination" class="flex justify-center items-center mt-4">
                    <button id="prevPage" class="text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-4 py-1 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900">Poprzednia</button>
                    <span id="currentPage" class="ml-2 mr-2 mb-2 text-black dark:text-white rounded-full">1</span>
                    <button id="nextPage" class="text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-4 py-1 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900">Następna</button>
                  </div>

              </div>

             </div>
          </div>

            <!-- Main modal -->
        <div id="add-modal" data-modal-backdrop="addm" tabindex="-1" aria-hidden="true" class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
          <div class="relative w-full max-w-2xl max-h-full">
             <!-- Modal content -->
             <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                <!-- Modal header -->
                <div class="flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600">
                      <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                         Edycja Produktu
                      </h3>
                      <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="add-modal">
                         <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                         </svg>
                         <span class="sr-only">Zamknij</span>
                      </button>
                </div>
                <!-- Modal body -->
                <div class="p-6 space-y-6">
                  <form id="productForm" onsubmit="submitForm(event)">
                      <div class="relative z-0 w-full mb-6 group">
                        <label for="product_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nazwa Produktu :</label>
                        <input type="text" id="product_name" name="product_name" aria-describedby="helper-text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="GeForce RTX 3060" required>
                        <p id="helper-text" class="mt-2 text-sm text-gray-500 dark:text-gray-400">Pamiętaj aby dostosować się do naszego <a href="#" class="font-medium text-blue-600 hover:underline dark:text-blue-500">Regulaminu</a>.</p>
                      </div>
                      <div class="relative z-0 w-full mb-6 group">
                        <label for="product_slug" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Link Produktu :</label>
                        <input type="text" id="product_slug" name="product_slug" aria-describedby="helper-text-slug" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="geforce-rtx-3060" required>
                        <p id="helper-text-slug" class="mt-2 text-sm text-gray-500 dark:text-gray-400">Link nie może zawierać polskich słów, znaków specjalnych oraz spacji.</p>
                      </div>
                      <div class="relative z-0 w-full mb-6 group">
                        <label for="product_desc_long" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Długi Opis Produktu:</label>
                        <textarea id="product_desc_long" name="product_desc_long" rows="4" class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Aby cieszyć się grą na najwyższych ustawieniach graficznych, niezbędny jest solidny sprzęt. Na szczęście w ostatnim czasie gracze nie mogą narzekać. Karta graficzna Gigabyte RTX 3060 GAMING OC 12G oferuje wszystko, czego trzeba, aby cieszyć się rozgrywką na naprawdę wysokim poziomie. Jest to propozycja przygotowana dla wymagających graczy, którzy cenią sobie przede wszystkim komfort oraz osiągi, które oferuje sprzęt o takich parametrach. Mamy do czynienia z niebanalną konstrukcją, w środku której drzemie prawdziwy potwór." required></textarea>
                      </div>
                      <div class="relative z-0 w-full mb-6 group">
                        <label for="product_desc_short" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Krótki Opis Produktu:</label>
                        <textarea id="product_desc_short" name="product_desc_short" rows="4" class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Aby cieszyć się grą na najwyższych ustawieniach graficznych, niezbędny jest solidny sprzęt. Na szczęście w ostatnim czasie gracze nie mogą narzekać. Karta graficzna Gigabyte..." required></textarea>
                      </div>
                      <div class="relative z-0 w-full mb-6 group">
                        <label for="product_price" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Cena Produktu :</label>
                        <input type="number" id="product_price" name="product_price" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="1499" step="0.01" required>
                      </div>

                      <div class="grid md:grid-cols-2 md:gap-6">
                        <div class="relative z-0 w-full mb-6 group">
                          <label for="product_delivery" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Dostawca :</label>
                          <input type="text" id="product_delivery" name="product_delivery" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Inpost Paczkomaty 24/7" required>
                        </div>
                        <div class="relative z-0 w-full mb-6 group">
                          <label for="product_delivery_cost" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Cena Dostawy :</label>
                          <input type="number" id="product_delivery_cost" name="product_delivery_cost" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="14.99" step="0.01" required>
                        </div>
                      </div>

                      <div class="relative z-0 w-full mb-6 group">
                        <label for="product_category" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Kategoria Produktu :</label>
                        <select id="product_category" name="product_category" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required>
                        </select>
                      </div>

                      <div class="grid md:grid-cols-2 md:gap-6">
                        <div class="relative z-0 w-full mb-6 group">
                          <label for="buy_now" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Kup Teraz :</label>
                          <select id="buy_now" name="buy_now" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required>
                            <option value="0">Nie</option>
                            <option value="1">Tak</option>
                          </select>
                        </div>
                        <div class="relative z-0 w-full mb-6 group">
                          <label for="auction" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Licytacja :</label>
                          <select id="auction" name="auction" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required>
                            <option value="0">Nie</option>
                            <option value="1">Tak</option>
                          </select>
                        </div>
                      </div>

                      <div class="grid md:grid-cols-2 md:gap-6">
                        <div class="relative z-0 w-full mb-6 group">
                          <label for="product_date" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Data Utworzenia :</label>
                          <input type="date" id="product_date" name="product_date" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required>
                        </div>
                        <div class="relative z-0 w-full mb-6 group">
                          <label for="product_enddate" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Data Zakończenia :</label>
                          <input type="date" id="product_enddate" name="product_enddate" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required>
                        </div>
                      </div>

                      <div class="relative z-0 w-full mb-6 group">
                        <label for="manager_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Sprzedawca :</label>
                        <span id="manager_name" class="text-black dark:text-white"></span><br>
                        <input type="hidden" id="manager_input" name="manager">
                      </div>

                      <button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Zaktualizuj</button>
                    </form>
                </div>
                <!-- Modal footer -->
                <div class="flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600">
                   <button data-modal-hide="add-modal" type="button" class="text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800">Anuluj</button>
                </div>
             </div>
          </div>
       </div>

        <footer class="bg-white rounded-lg shadow dark:bg-gray-900 m-4 transition-all duration-900 ease-in-out">
                <hr class="my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8" />
                <span class="block text-sm text-gray-500 sm:text-center dark:text-gray-400">© 2023 <a href="https://flowbite.com/" class="hover:underline">Sklep·Na·++</a>. Wszelkie Prawa Zastrzeżone.</span>
            </div>
        </footer>

        <script type="text/javascript" src="/static/assets/home/js/darkmode.js"></script>
        <script type="text/javascript" src="/static/assets/home/js/main.js"></script>
		<script>
			document.addEventListener("DOMContentLoaded", function() {
    var allProducts = [];
    var currentPage = 1;
    var itemsPerPage = 5; // Liczba produktów na stronę, dostosuj według potrzeb

    // Funkcja renderująca produkty na bieżącej stronie
    function renderProducts() {
      loadCategories()
        var startIndex = (currentPage - 1) * itemsPerPage;
        var endIndex = startIndex + itemsPerPage;
        var displayedProducts = allProducts.slice(startIndex, endIndex);

        const tbody = document.querySelector('tbody');
        tbody.innerHTML = ''; // Wyczyść tabelę przed dodaniem nowych wierszy
        updatePageNumber();

        displayedProducts.forEach(product => {
            const tr = document.createElement('tr');
            tr.className = "bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600";

            tr.innerHTML = `
                <th scope="row" class="flex items-center px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white">
                    <div class="pl-3">
                        <div class="text-base font-semibold">${product.name}</div>
                    </div>  
                </th>
                <td class="px-6 py-4"><a href="/products/${product.slug}" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">${product.slug}</a></td>
                <td class="px-6 py-4">${product.date}</td>
                <td class="px-6 py-4">${product.endDate}</td>
                <td class="px-6 py-4">${product.category}</td>
                <td class="px-6 py-4">${product.manager_name}</td>
                <td class="px-6 py-4">
                    <button onclick="editProduct('${product.slug}')" class="text-blue-600 hover:text-blue-900"><a href="#" data-modal-target="add-modal" data-modal-toggle="add-modal" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Edytuj</a></button>
                    <button onclick="deleteProduct('${product.slug}')" class="text-red-600 hover:text-red-900">Usuń</button>
                </td>
            `;

            tbody.appendChild(tr);
        });
    }

    function updatePageNumber() {
      document.getElementById('currentPage').textContent = currentPage;
    }

    // Funkcje do obsługi przycisków paginacji
    document.getElementById('nextPage').addEventListener('click', function() {
        if (currentPage * itemsPerPage < allProducts.length) {
            currentPage++;
            renderProducts();
        }
    });

    document.getElementById('prevPage').addEventListener('click', function() {
        if (currentPage > 1) {
            currentPage--;
            renderProducts();
        }
    });

    // Pobierz dane produktów i zrenderuj pierwszą stronę
    fetch('/admin/products/data')
        .then(response => response.json())
        .then(data => {
            allProducts = data;
            renderProducts();
        })
        .catch(error => {
            console.error('There was an error fetching the products data:', error);
        });

        window.deleteProduct = function(slug) {
          Swal.fire({
              title: 'Czy na pewno chcesz usunąć ten produkt?',
              showCancelButton: true,
              confirmButtonText: 'Usuń',
              cancelButtonText: 'Anuluj',
          }).then((result) => {
              if (result.isConfirmed) {
                  var dataToSend = JSON.stringify({ slug: slug });
                  console.log("Wysyłanie danych do serwera:", dataToSend); // Wypisanie danych wysyłanych do konsoli

                  $.ajax({
                      url: '/product/delete',
                      type: 'POST',
                      contentType: 'application/json',
                      data: dataToSend,
                      success: function(response) {
                          console.log("Odpowiedź serwera:", response); // Wypisanie odpowiedzi serwera do konsoli
                          Swal.fire('Usunięto!', '', 'success');
                          location.href = "/admin/products/";
                      },
                      error: function(xhr, status, error) {
                          console.error("Błąd odpowiedzi:", xhr.responseText); // Wypisanie błędu do konsoli
                          Swal.fire('Błąd', 'Nie udało się usunąć produktu.', 'error');
                      }
                  });
              }
          });
      };

        // Funkcja edytowania produktu (do implementacji)
        window.editProduct = function(slug) {
            var product = allProducts.find(p => p.slug === slug);
            
            if (product) {
                $('#product_name').val(product.name);
                $('#product_slug').val(product.slug).prop('disabled', true);
                $('#product_desc_long').val(product.descLong);
                $('#product_desc_short').val(product.descShort);
                $('#product_price').val(product.price);
                $('#product_delivery').val(product.delivery);
                $('#product_delivery_cost').val(product.deliveryCost);
                $('#product_category option').filter(function() {
                    return $(this).text() == product.category;
                }).prop('selected', true);
                $('#buy_now').val(product.buyNow);
                $('#auction').val(product.auction);
                $('#product_date').val(formatDate(product.date)); // Formatuj datę na "YYYY-MM-DD"
                $('#product_enddate').val(formatDate(product.endDate)); // Formatuj datę na "YYYY-MM-DD"
                $('#manager_name').text(product.manager_name); // Ustaw nazwę menedżera
                $('#manager_input').val(product.manager); // Ustaw wartość ukrytego inputu dla menedżera
                $('#add-modal').show(); // Otwórz okno modalne
            }
        };

        function formatDate(dateString) {
            var date = new Date(dateString);
            var year = date.getFullYear();
            var month = ('0' + (date.getMonth() + 1)).slice(-2);
            var day = ('0' + date.getDate()).slice(-2);
            return `${year}-${month}-${day}`;
        }

        // Funkcja do pobierania kategorii i budowania menu rozwijanego
        function loadCategories() {
            fetch('/admin/category/data')
            .then(response => response.json())
            .then(data => {
                var select = document.getElementById('product_category');
                select.innerHTML = ''; // Czyści aktualne opcje
                data.forEach(function(category, index) {
                    var option = document.createElement('option');
                    option.value = category.id;
                    option.text = category.name;
                    select.appendChild(option);
                });
            })
            .catch(error => {
                console.error('Error:', error);
                Swal.fire({
                    title: 'Błąd',
                    text: 'Wystąpił błąd podczas ładowania kategorii.',
                    icon: 'error',
                    confirmButtonText: 'OK',
                    color: '#DEECF9',
                });
            });
          }

          document.getElementById('productForm').addEventListener('submit', submitForm);

          function submitForm(event) {
            event.preventDefault();

            let productData = {
                product_name: document.getElementById('product_name').value,
                product_slug: document.getElementById('product_slug').value,
                product_desc_long: document.getElementById('product_desc_long').value,
                product_desc_short: document.getElementById('product_desc_short').value,
                product_price: parseFloat(document.getElementById('product_price').value),
                product_date: document.getElementById('product_date').value,
                product_enddate: document.getElementById('product_enddate').value,
                product_delivery: document.getElementById('product_delivery').value,
                product_delivery_cost: parseFloat(document.getElementById('product_delivery_cost').value),
                product_manager: parseInt(document.getElementById('manager_input').value),
                product_category: parseInt(document.getElementById('product_category').value),
                buy_now: parseInt(document.getElementById('buy_now').value),
                auction: parseInt(document.getElementById('auction').value)
            };

            fetch('/product/edit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(productData)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                Swal.fire({
                    title: data.status === 'success' ? 'Sukces!' : 'Błąd!',
                    text: data.message,
                    icon: data.status === 'success' ? 'success' : 'error',
                    confirmButtonText: 'OK',
                    color: '#DEECF9',
                }).then((result) => {
                    if (data.status === "success") {
                        location.href = "/admin/products";
                    }
                });
            })
            .catch(error => {
                console.error('Error:', error);
                Swal.fire({
                    title: 'Błąd',
                    text: 'Wystąpił błąd podczas aktualizacji produktu.',
                    icon: 'error',
                    confirmButtonText: 'OK',
                    color: '#DEECF9',
                });
            });
        }

			});

      

      
		</script>

    </body>
</html>
